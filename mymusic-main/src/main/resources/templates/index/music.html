<!DOCTYPE html>
<html lang="en" class="app" xmlns:th="http://www.thymeleaf.org" taglib>

<head>
    <meta charset="utf-8" />
    <title>Musik | Web Application</title>
    <meta name="description" content="app, web app, responsive, admin dashboard, admin, flat, flat ui, ui kit, off screen nav" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <link rel="stylesheet" th:href="@{js/jPlayer/jplayer.flat.css}" type="text/css" />
    <link rel="stylesheet" th:href="@{css/bootstrap.css}" type="text/css" />
    <link rel="stylesheet" th:href="@{css/animate.css}" type="text/css" />
    <link rel="stylesheet" th:href="@{css/font-awesome.min.css}" type="text/css" />
    <link rel="stylesheet" th:href="@{css/simple-line-icons.css}" type="text/css" />
    <link rel="stylesheet" th:href="@{css/font.css}" type="text/css" />
    <link rel="stylesheet" th:href="@{css/app.css}" type="text/css" />
    <!--[if lt IE 9]>
    <script th:src="@{js/ie/html5shiv.js}"></script>
    <script th:src="@{js/ie/respond.min.js}"></script>
    <script th:src="@{js/ie/excanvas.js}"></script>
    <![endif]-->
</head>

<body class="" onload="pageChange(1)">
<section class="vbox">
    <header class="bg-white-only header header-md navbar navbar-fixed-top-xs">
        <div class="navbar-header aside bg-info dk nav-xs">
            <a class="btn btn-link visible-xs" data-toggle="class:nav-off-screen,open" data-target="#nav,html">
                <i class="icon-list"></i>
            </a>
            <a th:href="@{member}" class="navbar-brand text-lt">
                <i class="icon-earphones"></i>
                <img th:src="@{images/logo.png}" alt="." class="hide">
                <span class="hidden-nav-xs m-l-sm">Musik</span>
            </a>
            <a class="btn btn-link visible-xs" data-toggle="dropdown" data-target=".user">
                <i class="icon-settings"></i>
            </a>
        </div>
        <ul class="nav navbar-nav hidden-xs">
            <li>
                <a href="#nav,.navbar-header" data-toggle="class:nav-xs,nav-xs" class="text-muted">
                    <i class="fa fa-indent text"></i>
                    <i class="fa fa-dedent text-active"></i>
                </a>
            </li>
        </ul>

        <div class="navbar-right ">
            <ul class="nav navbar-nav m-n hidden-xs nav-user user">
                <li class="hidden-xs">

                    <section class="dropdown-menu aside-xl animated fadeInUp">
                        <section class="panel bg-white">
                            <div class="panel-heading b-light bg-light">
                                <strong>You have <span class="count">2</span> notifications</strong>
                            </div>
                            <div class="list-group list-group-alt">
                                <a href="#" class="media list-group-item">
											<span class="pull-left thumb-sm">
                      <img src="images/a0.png" alt="..." class="img-circle">
                    </span>
                                    <span class="media-body block m-b-none">
                      Use awesome animate.css<br>
                      <small class="text-muted">10 minutes ago</small>
                    </span>
                                </a>
                                <a href="#" class="media list-group-item">
											<span class="media-body block m-b-none">
                      1.0 initial released<br>
                      <small class="text-muted">1 hour ago</small>
                    </span>
                                </a>
                            </div>
                            <div class="panel-footer text-sm">
                                <a href="#" class="pull-right"><i class="fa fa-cog"></i></a>
                                <a href="#notes" data-toggle="class:show animated fadeInRight">See all the notifications</a>
                            </div>
                        </section>
                    </section>
                </li>
                <li class="dropdown">
                    <a href="#" class="dropdown-toggle bg clear" data-toggle="dropdown">
								<span class="thumb-sm avatar pull-right m-t-n-sm m-b-n-sm m-l-sm">
                <img src="images/a0.png" alt="...">
              </span>  <span th:text="${session.User.username}"></span><b  class="caret"></b>
                    </a>
                    <ul class="dropdown-menu animated fadeInRight">
                        <li>
                            <a th:href="@{toGeRenXinXi}">个人信息</a>
                        </li>
                        <li>
                            <a th:href="@{toAddUserMusic}">上传歌曲</a>
                        </li>
                        <hr>
                        <li>
                            <a th:href="@{logout}" >注销</a>
                        </li>
                    </ul>
                </li>
            </ul>
        </div>
    </header>
    <section>
        <section class="hbox stretch">
            <!-- .aside -->
            <aside class="bg-dark dk nav-xs aside hidden-print" id="nav">
                <section class="vbox">
                    <section class="w-f-md scrollable">
                        <div class="slim-scroll" data-height="auto" data-disable-fade-out="true" data-distance="0" data-size="10px" data-railOpacity="0.2">

                            <!-- nav -->
                            <nav class="nav-primary hidden-xs">
                                <ul class="nav bg clearfix">
                                    <li class="hidden-nav-xs padder m-t m-b-sm text-xs text-muted">
                                        推荐
                                    </li>
                                    <li>
                                        <a th:href="@{member}">
                                            <i class="icon-disc icon text-success"></i>
                                            <span class="font-bold">发现音乐</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a th:href="@{toMusic}">
                                            <i class="icon-music-tone-alt icon text-info"></i>
                                            <span class="font-bold">音乐</span>
                                        </a>
                                    </li>

                                    <li>
                                        <a th:href="@{toSinger}" data-target="#content" data-el="#bjax-el" data-replace="true">
                                            <i class="icon-social-youtube icon  text-primary"></i>
                                            <span class="font-bold">歌手</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a th:href="@{toTuiJian}">
                                            <i class="icon-drawer icon text-primary-lter"></i>
                                            <span class="font-bold">推荐</span>
                                        </a>
                                    </li>
                                    <li class="m-b hidden-nav-xs"></li>
                                </ul>

                            </nav>
                            <!-- / nav -->
                        </div>
                    </section>

                </section>
            </aside>
            <!-- /.aside -->
            <section id="content">
                <section class="vbox">
                    <section class="scrollable">
                        <section class="hbox stretch">

                            <section>
                                <section class="vbox">
                                    <section class="scrollable padder-lg">

                                        <div style="width: 100%; height: 100%;">
                                            <div class="container-fluid">
                                                <div class="row">
                                                    <div class="col-lg-10 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                            <h3 style="margin-left: 2%;" id="liuxing">全部歌曲</h3>
                                                            <div class="input-group " >
																		<span class="input-group-btn ">
              											<button type="submit " id="queryBtn"   style="height: 40px" class="btn btn-sm bg-white btn-icon rounded ">
              												<i class="fa fa-search "></i>
              											</button>
            												</span>
                                                                <input id="queryText" type="text " class="form-control input-sm no-border rounded "  style="height: 40px;font-size: 15px" placeholder="Search songs, albums... ">
                                                            </div>
                                                            <div style="width:100%; border:1px solid red;"></div>
                                                            <table class="table table-striped">
                                                                <tr>
                                                                    <td></td>
                                                                    <td>标题</td>
                                                                    <td>专辑</td>
                                                                    <td>歌手</td>
                                                                    <td>音乐类型</td>

                                                                </tr>
                                                                <tbody id="tbody1">

                                                                </tbody>
                                                                <tfoot>
                                                                <tr>
                                                                    <td colspan="6" align="center">
                                                                        <ul class="pagination">

                                                                        </ul>
                                                                    </td>
                                                                </tr>

                                                                </tfoot>
                                                            </table>
                                                        </div>




                                                    </div>
                                                    <div class="col-md-2 col-md-12 col-sm-12 col-xs-12" style="text-align: center;">
                                                        <h4>下载客户端</h4>
                                                        <img style="width: 150px;height: 150px;" th:src="@{images/ewm.png}" alt="" />
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </section>
                                </section>
                            </section>
                        </section>
                    </section>
                </section>
                <a href="#" class="hide nav-off-screen-block" data-toggle="class:nav-off-screen,open" data-target="#nav,html"></a>
            </section>
        </section>

    </section>
</section>
</section>
<script th:src="@{js/jquery.min.js}"></script>
<!-- Bootstrap -->
<script th:src="@{js/bootstrap.js}"></script>
<!-- App -->
<script th:src="@{js/app.js}"></script>
<script th:src="@{js/slimscroll/jquery.slimscroll.min.js}"></script>
<script th:src="@{js/app.plugin.js}"></script>
<script type="text/javascript" th:src="@{js/jPlayer/jquery.jplayer.min.js}"></script>
<script type="text/javascript" th:src="@{js/jPlayer/add-on/jplayer.playlist.min.js}"></script>
<script type="text/javascript" th:src="@{js/jPlayer/demo.js}"></script>
<script>

    function pageChange(pageno) {
        //window.location.href="${APP_PATH}/user/userList.do?pageno="+pageno
        queryPageMusic(pageno);
    }

    var jsonObj = {
        "pageno": 1,
        "pagesize": 20
    }

    var loadingIndex = -1;

    function queryPageMusic(pageno) {
        jsonObj.pageno = pageno;
        $
            .ajax({
                type : "POST",
                data : jsonObj,
                url : "queryAllMusic",
                beforeSend : function() {
                    loadingIndex = layer.load(2, {
                        time : 10 * 1000
                    });
                    return true;
                },
                success : function(result) {
                    layer.close(loadingIndex);
                    if (result.success) {
                        var page = result.page;
                        var data = page.datas;

                        var content = '';

                        $.each(data,function(i, n) {

                            content += '<tr>';
                            content += '  <td>'
                                + (i + 1) + '</td>';
                            content += '  <td>'
                                + n.name
                                + '<a onclick="window.location.href=\'toBofangqi?id='+ n.id+ '&singer='+n.singer+'\'" ><img src="images/g4.png" height="20" width="20" style="margin-left: 10px"/></a></td>';
                            content += '  <td>'
                                + n.album
                                + '</td>';
                            content += '  <td>'
                                + n.singer + '</td>';
                            content += '  <td>'
                                + n.songtype + '</td>';
                            content += '</tr>';

                        });

                        $("#tbody1").html(content);

                        var contentBar = '';

                        if (page.pageno == 1) {
                            contentBar += '<li class="disabled"><a href="#">上一页</a></li>';
                        } else {
                            contentBar += '<li><a href="#" onclick="pageChange('
                                + (pageno - 1) + ')">上一页</a></li>';
                        }

                        for (var i = 1; i <= page.totalno; i++) {
                            contentBar += '<li ';
                            if (page.pageno == i) {
                                contentBar += 'class="active"';
                            }
                            contentBar += '><a href="#" onclick="pageChange('
                                + i + ')">' + i + '</a></li>';
                        }

                        if (page.pageno == page.totalno) {
                            contentBar += '<li class="disabled"><a href="#" >下一页</a></li>';
                        } else {
                            contentBar += '<li><a href="#" onclick="pageChange('
                                + (pageno + 1) + ')">下一页</a></li>';
                        }

                        $(".pagination").html(contentBar);

                    } else {
                        layer.msg(result.msg, {
                            time: 1000,
                            icon: 5,
                            shift: 6
                        });
                    }
                },
                error: function () {
                    layer.msg("加载失败", {
                        time: 1000,
                        icon: 5,
                        shift: 6
                    });
                }

            });
    }

    $("#queryBtn").click(function () {
        var queryText = $("#queryText").val();
        jsonObj.queryText = queryText;
        queryPageMusic(1);

    });
</script>
</body>

</html>